<Window x:Class="IDCA.Client.View.AxisSettingWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:viewmodel="clr-namespace:IDCA.Client.ViewModel" 
        xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
        d:DataContext="{d:DesignInstance Type=viewmodel:AxisSettingViewModel}"
        mc:Ignorable="d"
        Height="600" 
        Width="900"
        ResizeMode="CanMinimize">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="10"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="10"/>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="10"/>
            <ColumnDefinition Width="880"/>
            <ColumnDefinition Width="10"/>
        </Grid.ColumnDefinitions>

        <Grid Grid.Row="1"
              Grid.Column="1">

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="550"/>
                <ColumnDefinition Width="330"/>
            </Grid.ColumnDefinitions>

            <Grid Grid.Column="0">

                <Grid.RowDefinitions>
                    <RowDefinition Height="30"/>
                    <RowDefinition Height="350"/>
                    <RowDefinition Height="30"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0"
                           Text="轴表达式配置"
                           FontSize="18"
                           FontWeight="Black"
                           FontFamily="{StaticResource IDCA.Font.Family}"
                           VerticalAlignment="Top"/>

                <Grid Grid.Row="1">
                    
                    <Grid.Resources>
                        <Style TargetType="Button">
                            <Setter Property="Background" Value="White"/>
                            <Setter Property="Foreground" Value="#FFEFEFEF"/>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#FFDADADA"/>
                                    <Setter Property="Foreground" Value="DarkGray"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Grid.Resources>

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="285"/>
                        <!--<ColumnDefinition Width="40"/>-->
                        <ColumnDefinition Width="275"/>
                        <!--<ColumnDefinition Width="40"/>-->
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        
                        <TextBlock Margin="10 10 0 5"
                                   Text="可用轴元素"
                                   VerticalAlignment="Bottom"
                                   FontFamily="{StaticResource IDCA.Font.Family}"
                                   FontSize="15"
                                   FontWeight="Bold"/>

                        <ListBox Margin="10 5"
                                 Height="300"
                                 BorderThickness="0"
                                 FontSize="13"
                                 Background="{Binding RelativeSource={RelativeSource AncestorType=Window, Mode=FindAncestor}, Path=Background}"
                                 ItemsSource="{Binding AvailableElements}"
                                 SelectedIndex="{Binding AvailableSelectedIndex}"
                                 d:ItemsSource="{d:SampleData ItemCount=5}">
                            <ListBox.Resources>
                                <Style TargetType="ListBoxItem">
                                    <Setter Property="Background" Value="{Binding RelativeSource={RelativeSource AncestorType=ListBox}, Path=Background}"/>
                                </Style>
                            </ListBox.Resources>
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Grid Height="20"
                                          Width="{Binding RelativeSource={RelativeSource AncestorType=ListBox, Mode=FindAncestor}, Path=Width}">
                                        <Grid.Resources>
                                            <Style TargetType="Button">
                                                <Setter Property="Cursor" Value="Hand"/>
                                            </Style>
                                        </Grid.Resources>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="210"/>
                                            <ColumnDefinition Width="20"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" 
                                                   VerticalAlignment="Center" 
                                                   Text="{Binding Name}"/>
                                        <Button Grid.Column="1" 
                                                Command="{Binding AddCommand}" Cursor="Hand">
                                            <Button.Template>
                                                <ControlTemplate TargetType="Button">
                                                    <Grid Height="20"
                                                          Width="20"
                                                          Background="#00000000">
                                                        <iconPacks:PackIconMaterialDesign Kind="Add"
                                                                                          Height="13"
                                                                                          Width="13"
                                                                                          VerticalAlignment="Center"
                                                                                          HorizontalAlignment="Center"/>
                                                    </Grid>
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                    </Grid>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>

                    </StackPanel>

                    <StackPanel Grid.Column="2">

                        <TextBlock Margin="10 10 0 5"
                                   Text="现有轴元素"
                                   VerticalAlignment="Bottom"
                                   FontFamily="{StaticResource IDCA.Font.Family}"
                                   FontSize="15"
                                   FontWeight="Bold"/>

                        <!--<ListBox Margin="10 5"
                                 Height="250"
                                 FontSize="13"
                                 BorderThickness="0"
                                 Background="{Binding RelativeSource={RelativeSource AncestorType=Window, Mode=FindAncestor}, Path=Background}"
                                 ItemsSource="{Binding AxisCurrentElements}"
                                 SelectedIndex="{Binding AxisCurrentElementsSelectIndex}"
                                 d:ItemsSource="{d:SampleData ItemCount=5}">
                            <ListBox.Resources>
                                <Style TargetType="ListBoxItem">
                                    <Setter Property="Background" Value="{Binding RelativeSource={RelativeSource AncestorType=ListBox}, Path=Background}"/>
                                </Style>
                            </ListBox.Resources>
                        </ListBox>-->

                        <TreeView Margin="10 5"
                                  Height="300"
                                  FontSize="13"
                                  BorderThickness="0"
                                  Background="{Binding RelativeSource={RelativeSource AncestorType=Window, Mode=FindAncestor}, Path=Background}"
                                  ItemsSource="{Binding Tree}"
                                  d:ItemsSource="{d:SampleData ItemCount=5}">
                            <TreeView.ItemContainerStyle>
                                <Style TargetType="TreeViewItem" BasedOn="{StaticResource MaterialDesignTreeViewItem}">
                                    <Setter Property="Background" Value="{Binding RelativeSource={RelativeSource AncestorType=Window, Mode=FindAncestor}, Path=Background}"/>
                                    <Setter Property="IsSelected" Value="{Binding IsSelected}"/>
                                </Style>
                            </TreeView.ItemContainerStyle>
                            <TreeView.ItemTemplate>
                                <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                                    <Grid Height="25">
                                        <Grid.Resources>
                                            <Style TargetType="Button">
                                                <Setter Property="Cursor" Value="Hand"/>
                                                <Setter Property="Width" Value="20"/>
                                                <Setter Property="Height" Value="25"/>
                                            </Style>
                                        </Grid.Resources>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="115"/>
                                            <ColumnDefinition Width="80"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" 
                                                   HorizontalAlignment="Left" 
                                                   VerticalAlignment="Center"
                                                   Text="{Binding Name}"/>
                                        <Grid Grid.Column="1"
                                              Width="80"
                                              HorizontalAlignment="Right">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="20"/>
                                                <ColumnDefinition Width="20"/>
                                                <ColumnDefinition Width="20"/>
                                                <ColumnDefinition Width="20"/>
                                            </Grid.ColumnDefinitions>
                                            <Button Grid.Column="0" 
                                                    Visibility="{Binding AllowChildren, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                    Command="{Binding AddChildCommand}">
                                                <Button.Template>
                                                    <ControlTemplate TargetType="Button">
                                                        <Grid Height="25"
                                                              Width="20"
                                                              Background="#00000000">
                                                            <iconPacks:PackIconMaterialDesign Kind="Add"
                                                                                              Height="13"
                                                                                              Width="13"
                                                                                              VerticalAlignment="Center"
                                                                                              HorizontalAlignment="Center"/>
                                                        </Grid>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button Grid.Column="1" 
                                                    Command="{Binding MoveUpCommand}">
                                                <Button.Template>
                                                    <ControlTemplate TargetType="Button">
                                                        <Grid Height="25"
                                                              Width="20"
                                                              Background="#00000000">
                                                            <iconPacks:PackIconMaterialDesign Kind="ArrowUpward"
                                                                                              Height="13"
                                                                                              Width="13"
                                                                                              VerticalAlignment="Center"
                                                                                              HorizontalAlignment="Center"/>
                                                        </Grid>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button Grid.Column="2" 
                                                    Command="{Binding MoveDownCommand}">
                                                <Button.Template>
                                                    <ControlTemplate TargetType="Button">
                                                        <Grid Height="25"
                                                              Width="20"
                                                              Background="#00000000">
                                                            <iconPacks:PackIconMaterialDesign Kind="ArrowDownward"
                                                                                              Height="13"
                                                                                              Width="13"
                                                                                              VerticalAlignment="Center"
                                                                                              HorizontalAlignment="Center"/>
                                                        </Grid>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button Grid.Column="3" 
                                                    Command="{Binding RemoveCommand}">
                                                <Button.Template>
                                                    <ControlTemplate TargetType="Button">
                                                        <Grid Height="25"
                                                              Width="20"
                                                              Background="#00000000">
                                                            <iconPacks:PackIconMaterialDesign Kind="Close"
                                                                                              Height="13"
                                                                                              Width="13"
                                                                                              VerticalAlignment="Center"
                                                                                              HorizontalAlignment="Center"/>
                                                        </Grid>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </Grid>
                                    </Grid>
                                </HierarchicalDataTemplate>
                            </TreeView.ItemTemplate>
                        </TreeView>

                    </StackPanel>
                    

                    <!--<Grid Grid.Row="1"
                          Grid.Column="1">

                        --><!--<Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="40"/>
                            --><!--<RowDefinition Height="40"/>--><!--
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>-->

                        <!--<Button Grid.Row="1"
                                Background="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=Background}"
                                Cursor="Hand"
                                Command="{Binding AppendTreeNodeCommand}">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Canvas Background="{TemplateBinding Background}"
                                            Height="30"
                                            Width="30"
                                            VerticalAlignment="Center"
                                            HorizontalAlignment="Center">
                                        <iconPacks:PackIconMaterial Kind="ChevronDoubleRight"
                                                                    Height="30"
                                                                    Width="30"/>
                                        --><!--<Path Stroke="DarkGray"
                                              StrokeThickness="0.5"
                                              Fill="{TemplateBinding Foreground}"
                                              Data="M 15,8 20,8 35,20 20,32 15,32 30,20z"/>
                                        <Path Stroke="DarkGray"
                                              StrokeThickness="0.5"
                                              Fill="{TemplateBinding Foreground}"
                                              Data="M 5,8 10,8 25,20 10,32 5,32 20,20z"/>--><!--
                                    </Canvas>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>-->

                        <!--<Button Grid.Row="2"
                                Cursor="Hand"
                                Background="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=Background}"
                                Command="{Binding RemoveTreeNodeCommand}">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Canvas Background="{TemplateBinding Background}"
                                            Height="30"
                                            Width="30"
                                            VerticalAlignment="Center"
                                            HorizontalAlignment="Center">
                                        <iconPacks:PackIconMaterial Kind="ChevronDoubleLeft"
                                                                    Height="30"
                                                                    Width="30"/>
                                        --><!--<Path Stroke="DarkGray"
                                              StrokeThickness="0.5"
                                              Fill="{TemplateBinding Foreground}"
                                              Data="M 25,8 20,8 5,20 20,32 25,32 10,20z"/>
                                        <Path Stroke="DarkGray"
                                              StrokeThickness="0.5"
                                              Fill="{TemplateBinding Foreground}"
                                              Data="M 35,8 30,8 15,20 30,32 35,32 20,20z"/>--><!--
                                    </Canvas>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>--><!--

                    </Grid>-->

                    <!--<Grid Grid.Column="3" Grid.Row="1">

                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="40"/>
                            <RowDefinition Height="40"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <Button Grid.Row="1"
                                Cursor="Hand"
                                Background="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=Background}"
                                Command="{Binding MoveUpCommand}">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Canvas Background="{TemplateBinding Background}"
                                            Height="30"
                                            Width="30"
                                            VerticalAlignment="Center"
                                            HorizontalAlignment="Center">
                                        <iconPacks:PackIconMaterial Kind="ChevronDoubleUp"
                                                                    Height="30"
                                                                    Width="30"/>
                                        --><!--<Path Stroke="DarkGray"
                                              StrokeThickness="0.5"
                                              Fill="{TemplateBinding Foreground}"
                                              Data="M20,5 8,20 8,25 20,10 32,25 32,20z"/>
                                        <Path Stroke="DarkGray"
                                              StrokeThickness="0.5"
                                              Fill="{TemplateBinding Foreground}"
                                              Data="M20,15 8,30 8,35 20,20 32,35 32,30z"/>--><!--
                                    </Canvas>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <Button Grid.Row="2"
                                Cursor="Hand"
                                Background="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=Background}"
                                Command="{Binding MoveDownCommand}">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Canvas Background="{TemplateBinding Background}"
                                            Height="30"
                                            Width="30"
                                            VerticalAlignment="Center"
                                            HorizontalAlignment="Center">
                                        <iconPacks:PackIconMaterial Kind="ChevronDoubleDown"
                                                                    Height="30"
                                                                    Width="30"/>
                                        --><!--<Path Stroke="DarkGray"
                                              StrokeThickness="0.5"
                                              Fill="{TemplateBinding Foreground}"
                                              Data="M20,35 8,20 8,15 20,30 32,15 32,20z"/>
                                        <Path Stroke="DarkGray"
                                              StrokeThickness="0.5"
                                              Fill="{TemplateBinding Foreground}"
                                              Data="M20,25 8,10 8,5 20,20 32,5 32,10z"/>--><!--
                                    </Canvas>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                    </Grid>-->
                    
                </Grid>

                <TextBlock Grid.Row="2"
                           Margin="10 0 0 0"
                           Text="轴表达式"
                           VerticalAlignment="Bottom"
                           FontFamily="{StaticResource IDCA.Font.Family}"
                           FontSize="15"
                           FontWeight="Bold"/>

                <TextBox Grid.Row="3"
                         Margin="10 5"
                         FontFamily="{StaticResource MaterialDesignFont}"
                         FontSize="15"
                         Background="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=Background}"
                         Text="{Binding AxisExpression}"
                         TextWrapping="Wrap"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}"/>

            </Grid>

            <Grid Grid.Column="1">

                <Grid.RowDefinitions>
                    <RowDefinition Height="30"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="1"
                            Background="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=Background}">

                    <TextBlock Grid.Row="1"
                               Margin="10 10 0 5"
                               Text="详细配置"
                               VerticalAlignment="Bottom"
                               FontFamily="{StaticResource IDCA.Font.Family}"
                               FontSize="15"
                               FontWeight="Bold"/>

                    <ScrollViewer Height="150" VerticalScrollBarVisibility="Auto">
                        <ItemsControl Margin="10 5" 
                                      BorderThickness="0"
                                      Background="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=Background}"
                                      ItemsSource="{Binding SelectedNode.Details}"
                                      d:ItemsSource="{d:SampleData ItemCount=5}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" 
                                                Height="30"
                                                Margin="2">
                                        <TextBlock Width="80"
                                                   Margin="5 2"
                                                   FontSize="14"
                                                   VerticalAlignment="Center"
                                                   Text="{Binding Name}"/>
                                        <Grid Width="120" 
                                              Height="30">
                                            <TextBox Width="120"
                                                     FontSize="14"
                                                     VerticalContentAlignment="Center"
                                                     Text="{Binding Text}"
                                                     Visibility="{Binding IsTextBox, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                            <ComboBox Width="120"
                                                      FontSize="14"
                                                      VerticalContentAlignment="Center"
                                                      ItemsSource="{Binding Selections}"
                                                      SelectedIndex="{Binding SelectedIndex}"
                                                      Visibility="{Binding IsComboBox, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                        </Grid>
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                        
                    </ScrollViewer>

                    <TextBlock Grid.Row="3"
                               Margin="10 10 0 5"
                               Text="后缀配置"
                               VerticalAlignment="Bottom"
                               FontFamily="{StaticResource IDCA.Font.Family}"
                               FontSize="15"
                               FontWeight="Bold"/>
                    
                    <ScrollViewer Height="255" VerticalScrollBarVisibility="Auto">
                    
                        <ItemsControl Margin="10 5" 
                                      BorderThickness="0"
                                      ItemsSource="{Binding SelectedNode.Suffixes}"
                                      d:ItemsSource="{d:SampleData ItemCount=5}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Height="30" Orientation="Horizontal">
                                        <CheckBox Margin="3 5" 
                                                  Width="20"
                                                  Height="20"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding Checked}"
                                                  Style="{StaticResource MaterialDesignUserForegroundCheckBox}" 
                                                  Cursor="Hand"/>
                                        <TextBlock Margin="2 0"
                                                   Width="155"
                                                   FontSize="14"
                                                   VerticalAlignment="Center"
                                                   Text="{Binding Name}"/>
                                        <Canvas Width="80"
                                                Height="28"
                                                VerticalAlignment="Center">
                                            <ComboBox Width="80"
                                                      Height="28"
                                                      Visibility="{Binding IsComboBox, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                      SelectedIndex="{Binding SelectedIndex}"
                                                      ItemsSource="{Binding Selections}"/>
                                            <TextBox Width="80"
                                                     Height="28"
                                                     FontSize="14"
                                                     Visibility="{Binding IsTextBox, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                     Text="{Binding Text}"
                                                     VerticalContentAlignment="Center"/>
                                        </Canvas>
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </StackPanel>
                
                <!--<StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Right"
                            Grid.Row="5">

                    <Button Width="90"
                            Height="30"
                            Margin="5"
                            FontSize="13"
                            VerticalAlignment="Bottom"
                            Command="{Binding ConfirmCommand}"
                            CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window, Mode=FindAncestor}}"
                            >确定</Button>
                                        
                    <Button Width="90"
                            Height="30"
                            Margin="5"
                            FontSize="13"
                            VerticalAlignment="Bottom"
                            Command="{Binding CancelCommand}"
                            CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window, Mode=FindAncestor}}"
                            >取消</Button>

                </StackPanel>-->

            </Grid>

        </Grid>
        
    </Grid>
</Window>
